(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"54d3":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{staticClass:"q-pa-md"},[s("div",{staticClass:"row"},[t.$q.platform.is.mobile?t._e():s("q-card",{staticClass:"col-xs-12 q-mb-md",attrs:{flat:"",bordered:""}},[s("q-card-section",{staticClass:"q-ma-none"},[s("div",{staticClass:"row items-center"},[s("p",{staticClass:"q-ma-none col-xs-12 col-md-1"},[s("strong",[t._v("Cena")])]),s("p",{staticClass:"q-ma-none col-xs-12 col-md-1"},[s("strong",[t._v("Ilość")])]),s("p",{staticClass:"q-ma-none col-xs-12 col-md-2"},[s("strong",[t._v("Kilometry")])]),s("p",{staticClass:"q-ma-none col-xs-12 col-md-2"},[s("strong",[t._v("Suma")])]),s("p",{staticClass:"q-ma-none col-xs-12 col-md-2"},[s("strong",[t._v("Spalanie")])]),s("p",{staticClass:"q-ma-none col-xs-12 col-md-2"},[s("strong",[t._v("Data")])]),s("p",{staticClass:"q-ma-none col-xs-12 col-md-2"})])])],1),t._l(t.fuelings,(function(e,n){return s("q-card",{key:e.id,staticClass:"col-xs-12 q-mb-md",attrs:{flat:"",bordered:""}},[s("q-card-section",{staticClass:"q-ma-none"},[e.id?s("div",{staticClass:"row items-center"},[t.$q.platform.is.mobile?s("p",{staticClass:"q-ma-none q-mt-sm col-xs-12"},[s("strong",[t._v("Cena")])]):t._e(),s("p",{staticClass:"q-ma-none col-xs-12 col-md-1"},[t._v(t._s(e.price)+" zł / L")]),t.$q.platform.is.mobile?s("p",{staticClass:"q-ma-none q-mt-sm col-xs-12"},[s("strong",[t._v("Ilość")])]):t._e(),s("p",{staticClass:"q-ma-none col-xs-12 col-md-1"},[t._v(t._s(e.amountFuel)+" L")]),t.$q.platform.is.mobile?s("p",{staticClass:"q-ma-none q-mt-sm col-xs-12"},[s("strong",[t._v("Kilometry")])]):t._e(),s("p",{staticClass:"q-ma-none col-xs-12 col-md-2"},[t._v("\n            "+t._s(e.kilometers)+" km / bak\n          ")]),t.$q.platform.is.mobile?s("p",{staticClass:"q-ma-none q-mt-sm col-xs-12"},[s("strong",[t._v("Suma")])]):t._e(),s("p",{staticClass:"q-ma-none col-xs-12 col-md-2"},[t._v(t._s(e.totalPrice)+" zł")]),t.$q.platform.is.mobile?s("p",{staticClass:"q-ma-none q-mt-sm col-xs-12"},[s("strong",[t._v("Spalanie")])]):t._e(),s("p",{staticClass:"q-ma-none col-xs-12 col-md-2"},[t._v("\n            "+t._s(e.averageFuelConsumption)+" L / 100 km\n          ")]),t.$q.platform.is.mobile?s("p",{staticClass:"q-ma-none q-mt-sm col-xs-12"},[s("strong",[t._v("Data")])]):t._e(),s("p",{staticClass:"q-ma-none col-xs-12 col-md-2"},[t._v(t._s(e.date))]),t.$q.platform.is.mobile?s("q-separator",{staticClass:"q-mt-sm q-mb-md"}):t._e(),s("div",{staticClass:"q-ma-none col-md-2"},[s("q-btn",{attrs:{color:"red-7",icon:"delete"},on:{click:function(s){return t.deleteFueling(e,n)}}})],1)],1):s("q-skeleton",{attrs:{type:"rect"}})],1)],1)}))],2),s("q-page-sticky",{attrs:{position:"bottom-right",offset:[18,18]}},[s("q-btn",{attrs:{fab:"",icon:"add",color:"green-7"},on:{click:function(e){t.add=!0}}})],1),s("AddFueling",{attrs:{milage:t.car.milage,open:t.add},on:{updatePopup:function(e){t.add=e}}})],1)},a=[],o=s("ded3"),i=s.n(o),l=s("2f62"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-dialog",{attrs:{persistent:""},model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[s("q-card",{staticStyle:{"min-width":"320px"}},[s("q-card-section",[s("div",{staticClass:"text-h6"},[t._v("Dodaj tankowanie")])]),s("q-card-section",{staticClass:"q-pt-none"},[s("form",{on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.onSubmit(e)},reset:function(e){return e.preventDefault(),e.stopPropagation(),t.onCancel(e)}}},[s("q-input",{ref:"price",attrs:{color:"green-7",label:"Cena / L",rules:[function(t){return!!t||"Pole jest wymagane"}]},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"payments"}})]},proxy:!0}]),model:{value:t.inputs.price,callback:function(e){t.$set(t.inputs,"price",e)},expression:"inputs.price"}}),s("q-input",{ref:"amountFuel",attrs:{color:"green-7",label:"Ilość litrów",type:"number",rules:[function(t){return!!t||"Pole jest wymagane"}]},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"local_gas_station"}})]},proxy:!0}]),model:{value:t.inputs.amountFuel,callback:function(e){t.$set(t.inputs,"amountFuel",e)},expression:"inputs.amountFuel"}}),s("q-input",{ref:"kilometers",attrs:{color:"green-7",label:"Kilometry / bak",type:"number",rules:[function(t){return!!t||"Pole jest wymagane"}]},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"speed"}})]},proxy:!0}]),model:{value:t.inputs.kilometers,callback:function(e){t.$set(t.inputs,"kilometers",e)},expression:"inputs.kilometers"}}),s("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[s("q-btn",{attrs:{flat:"",label:"Anuluj",color:"grey-9",type:"reset"}}),s("q-btn",{attrs:{flat:"",label:"Dodaj",color:"green-7",type:"submit"}})],1)],1)])],1)],1)},c=[],u={data(){return{inputs:{price:null,amountFuel:null,kilometers:null},CarId:parseInt(this.$route.params.id)}},computed:i()({},Object(l["c"])({car:"car/getCar"})),name:"AddFueling",props:{open:{type:Boolean,default:!1},milage:{type:Number,default:0},edit:{type:Object}},methods:i()(i()({},Object(l["b"])({addFueling:"fuel/add",editFueling:"fuel/edit"})),{},{clear(){delete this.inputs.CarId,delete this.inputs.milage;for(const t in this.inputs)this.inputs[t]=null},onSubmit(){let t=[];for(const e in this.inputs)this.$refs[e].validate(),this.inputs[e]=this.inputs[e].toString(),console.log(`val -> ${this.inputs[e]} - key -> ${e}`),console.log(parseFloat(this.inputs[e])),this.inputs[e].includes(",")&&null!=this.inputs[e]&&(this.inputs[e]=parseFloat(this.inputs[e].replaceAll(",","."))),this.$refs[e].hasError?t.push(!1):t.push(!0);if(!t.includes(!1)){this.$emit("updatePopup",!1),this.inputs.CarId=this.CarId,this.inputs.milage=this.milage;let t=JSON.parse(JSON.stringify(this.inputs));this.edit?(this.editFueling(t).then((t=>{console.log(t),this.clear()})),this.$q.notify({icon:"done",color:"green-7",message:"Edytowano tankowanie"}),this.clear(),this.$emit("clearEdit",null)):(this.addFueling(t).then((t=>{this.clear()})),this.$q.notify({icon:"done",color:"green-7",message:"Dodano tankowanie"}))}},onCancel(){if(this.$emit("updatePopup",!1),console.log(this.edit),!this.edit)for(const t in this.inputs)null!=this.inputs[t]&&(this.inputs[t]=null,this.$refs[t].resetValidation());this.$emit("clearEdit",null)}}),watch:{edit:function(t){null!=t&&(console.log("watch -> ",t),this.inputs=t)}}},p=u,m=s("2877"),d=s("24e8"),f=s("f09f"),g=s("a370"),q=s("27f9"),h=s("0016"),C=s("9c40"),b=s("4b7e"),_=s("eebe"),v=s.n(_),x=Object(m["a"])(p,r,c,!1,null,null,null),y=x.exports;v()(x,"components",{QDialog:d["a"],QCard:f["a"],QCardSection:g["a"],QInput:q["a"],QIcon:h["a"],QBtn:C["a"],QCardActions:b["a"]});var k={data(){return{add:!1}},name:"PageIndex",components:{AddFueling:y},computed:i()({},Object(l["c"])({car:"car/getCar",fuelings:"fuel/getFuelings"})),methods:i()(i()({},Object(l["b"])({fetchByCarId:"fuel/fetchByCarId",delete:"fuel/delete"})),{},{deleteFueling(t,e){this.delete({item:t,index:e})},editFueling(t){this.add=!0,this.editData={price:t.price,amountFuel:t.amountFuel,kilometers:t.kilometers}}}),created(){this.fetchByCarId(this.$route.params.id)}},$=k,F=s("9989"),w=s("eb85"),S=s("293e"),I=s("de5e"),Q=Object(m["a"])($,n,a,!1,null,null,null);e["default"]=Q.exports;v()(Q,"components",{QPage:F["a"],QCard:f["a"],QCardSection:g["a"],QSeparator:w["a"],QBtn:C["a"],QSkeleton:S["a"],QPageSticky:I["a"]})}}]);