(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"57e3":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{staticClass:"q-pa-md"},[s("div",{staticClass:"row"},[t.$q.platform.is.mobile?t._e():s("q-card",{staticClass:"col-xs-12 q-mb-md",attrs:{flat:"",bordered:""}},[s("q-card-section",{staticClass:"q-ma-none"},[s("div",{staticClass:"row items-center"},[s("p",{staticClass:"q-ma-none col-xs-12 col-md-3"},[s("strong",[t._v("Przegląd")])]),s("p",{staticClass:"q-ma-none col-xs-12 col-md-3"},[s("strong",[t._v("Ważność")])]),s("p",{staticClass:"q-ma-none col-xs-12 col-md-3"},[s("strong",[t._v("Następny")])])])])],1),t._l(t.servicings,(function(e,a){return s("q-card",{key:e.id,staticClass:"col-xs-12 q-mb-md",attrs:{flat:"",bordered:""}},[s("q-card-section",{staticClass:"q-ma-none"},[e.id?s("div",{staticClass:"row items-center"},[t.$q.platform.is.mobile?s("p",{staticClass:"q-ma-none q-mt-sm col-xs-12"},[s("strong",[t._v("Przegląd")])]):t._e(),s("p",{staticClass:"q-ma-none col-xs-12 col-md-3"},[t._v(t._s(e.current))]),t.$q.platform.is.mobile?s("p",{staticClass:"q-ma-none q-mt-sm col-xs-12"},[s("strong",[t._v("Ważność")])]):t._e(),1==e.valid?s("p",{staticClass:"q-ma-none col-xs-12 col-md-3"},[t._v("\n            "+t._s(e.valid)+" rok\n          ")]):e.valid<5&&e.valid>1?s("p",{staticClass:"q-ma-none col-xs-12 col-md-3"},[t._v("\n            "+t._s(e.valid)+" lata\n          ")]):s("p",{staticClass:"q-ma-none col-xs-12 col-md-3"},[t._v("\n            "+t._s(e.valid)+" lat\n          ")]),t.$q.platform.is.mobile?s("p",{staticClass:"q-ma-none q-mt-sm col-xs-12"},[s("strong",[t._v("Następny")])]):t._e(),s("p",{staticClass:"q-ma-none col-xs-12 col-md-3"},[t._v("\n            "+t._s(e.next)+"\n          ")]),t.$q.platform.is.mobile?s("q-separator",{staticClass:"q-mt-sm q-mb-md"}):t._e(),s("div",{staticClass:"q-ma-none col-md-2"},[s("q-btn",{attrs:{color:"red-7",icon:"delete"},on:{click:function(s){return t.deleteFueling(e,a)}}})],1)],1):s("q-skeleton",{attrs:{type:"rect"}})],1)],1)}))],2),s("q-page-sticky",{attrs:{position:"bottom-right",offset:[18,18]}},[s("q-btn",{attrs:{fab:"",icon:"add",color:"green-7"},on:{click:function(e){t.add=!0}}})],1),s("AddServicings",{attrs:{milage:t.car.milage,open:t.add},on:{updatePopup:function(e){t.add=e}}})],1)},n=[],i=s("ded3"),o=s.n(i),r=s("2f62"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-dialog",{attrs:{persistent:""},model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[s("q-card",{staticStyle:{"min-width":"320px"}},[s("q-card-section",[s("div",{staticClass:"text-h6"},[t._v("Dodaj przegląd")])]),s("q-card-section",{staticClass:"q-pt-none"},[s("form",{on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.onSubmit(e)},reset:function(e){return e.preventDefault(),e.stopPropagation(),t.onCancel(e)}}},[s("q-input",{ref:"current",attrs:{color:"green-7",label:"Data przeglądu",mask:"date",rules:["date"]},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[s("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[s("q-date",{attrs:{color:"green-7"},model:{value:t.inputs.current,callback:function(e){t.$set(t.inputs,"current",e)},expression:"inputs.current"}},[s("div",{staticClass:"row items-center justify-end"},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Zamknij",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.inputs.current,callback:function(e){t.$set(t.inputs,"current",e)},expression:"inputs.current"}}),s("q-input",{ref:"valid",attrs:{color:"green-7",label:"Ważność",type:"number",rules:[function(t){return!!t||"Pole jest wymagane"}]},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"schedule"}})]},proxy:!0}]),model:{value:t.inputs.valid,callback:function(e){t.$set(t.inputs,"valid",e)},expression:"inputs.valid"}}),s("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[s("q-btn",{attrs:{flat:"",label:"Anuluj",color:"grey-9",type:"reset"}}),s("q-btn",{attrs:{flat:"",label:"Dodaj",color:"green-7",type:"submit"}})],1)],1)])],1)],1)},c=[],d={data(){return{inputs:{current:null,valid:null},CarId:parseInt(this.$route.params.id)}},computed:{},name:"AddFueling",props:{open:{type:Boolean,default:!1},milage:{type:Number,default:0},edit:{type:Object}},methods:o()(o()({},Object(r["b"])({addServicings:"service/add",editServicings:"service/edit"})),{},{clear(){delete this.inputs.CarId;for(const t in this.inputs)this.inputs[t]=null},onSubmit(){let t=[];for(const e in this.inputs)this.$refs[e].validate(),"valid"==e&&(this.inputs[e]=parseInt(this.inputs[e])),this.$refs[e].hasError?t.push(!1):t.push(!0);if(!t.includes(!1)){this.$emit("updatePopup",!1),this.inputs.CarId=this.CarId,this.addServicings(this.inputs).then((t=>{console.log(t),this.clear()}));JSON.parse(JSON.stringify(this.inputs));this.$q.notify({icon:"done",color:"green-7",message:"Przegląd dodano"})}},onCancel(){if(this.$emit("updatePopup",!1),console.log(this.edit),!this.edit)for(const t in this.inputs)null!=this.inputs[t]&&(this.inputs[t]=null,this.$refs[t].resetValidation());this.$emit("clearEdit",null)}}),watch:{edit:function(t){null!=t&&(console.log("watch -> ",t),this.inputs=t)}}},p=d,u=s("2877"),m=s("24e8"),f=s("f09f"),v=s("a370"),q=s("27f9"),g=s("0016"),h=s("7cbe"),b=s("52ee"),C=s("9c40"),x=s("4b7e"),y=s("7f67"),_=s("eebe"),k=s.n(_),$=Object(u["a"])(p,l,c,!1,null,null,null),S=$.exports;k()($,"components",{QDialog:m["a"],QCard:f["a"],QCardSection:v["a"],QInput:q["a"],QIcon:g["a"],QPopupProxy:h["a"],QDate:b["a"],QBtn:C["a"],QCardActions:x["a"]}),k()($,"directives",{ClosePopup:y["a"]});var w={data(){return{add:!1}},name:"PageIndex",components:{AddServicings:S},computed:o()({},Object(r["c"])({car:"car/getCar",servicings:"service/getServicings"})),methods:o()(o()({},Object(r["b"])({fetchByCarId:"service/fetchByCarId",delete:"service/delete"})),{},{deleteFueling(t,e){this.delete({item:t,index:e})},editFueling(t){this.add=!0,this.editData={price:t.price,amountFuel:t.amountFuel,kilometers:t.kilometers}}}),created(){this.fetchByCarId(this.$route.params.id)}},P=w,Q=s("9989"),j=s("eb85"),I=s("293e"),D=s("de5e"),O=Object(u["a"])(P,a,n,!1,null,null,null);e["default"]=O.exports;k()(O,"components",{QPage:Q["a"],QCard:f["a"],QCardSection:v["a"],QSeparator:j["a"],QBtn:C["a"],QSkeleton:I["a"],QPageSticky:D["a"]})}}]);